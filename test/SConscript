import os
import sys
from sys import platform
Import('env')

build_dir = env['BUILDPATH']
program_name = build_dir + '/EcadTest.exe'
boost_library_path = env['BOOSTLIBRARYPATH']
thirdpart_lib_path = env['THIRDPARTLIBPATH']
linux_library_path = env['LINUXLIBRARYPATH']
compile_ecad_as_lib = env['COMPILEECADASLIB']

source_files = [
    'UnitTest.cpp'
]

libs_name = [
    'pthread',
    'png',
    'omp'
]

libs_path = [build_dir, boost_library_path, thirdpart_lib_path, linux_library_path]

# boost_serialization
boost_serialization_support = env['BOOSTSERIALIZATIONSUPPORT']
if boost_serialization_support :
    libs_name.append('boost_serialization')

if compile_ecad_as_lib :
    libs_name.append('Ecad')

rpath = libs_path
env.Program(program_name,source_files,LIBS=libs_name,LIBPATH=libs_path,RPATH=rpath)